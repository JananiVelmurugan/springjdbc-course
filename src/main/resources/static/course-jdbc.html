<!DOCTYPE html>
<html>
<head>
<script src="assets/jquery-3.1.1.min.js"></script>

<script>

$(document).ready(function(){
	alert("JQuery Loaded"); 
	loadRecords();
	$("#addBtn").click(insertRecord); 
});

function loadRecords(){
	$("#listTbl tbody").html("");
	var url="http://localhost:8080/course";
	
	$.getJSON(url,function(data){
		console.log(JSON.stringify(data));
		
		for(i in data){
			var object = data[i];
			var c = "<tr><td>"+object.code+"</td><td>"+object.name+"</td><td>"+object.description+"</td></tr>";
			$("#listTbl tbody").append(c);
			
		}
	});
}

function insertRecord(){
	var code =$("#code").val();
	var name =$("#name").val();
	var description =$("#description").val();
	var course = {"code":code,"name":name,"description":description};
	console.log("Input Data: "+JSON.stringify(course));
	var url ="http://localhost:8080/course";
	var request=$.ajax({
		url: url,
		type: "POST",
		data: JSON.stringify(course),
		contentType: "application/json",
		dataType: "json"
	}); 
	
	
 request.done(function(msg){
		console.log(msg);
		loadRecords();
	}); 
	//var request = $.post(url,JSON.stringify(course),json);
}
</script>
<title>Course Page</title>
</head>
<body>
	<form>
		<input type="text" id="code" required autofocus> <input
			type="text" id="name" required> <input type="text"
			id="description" required> <input type="button" id="addBtn"
			value="Add">
	</form>
	<form>
		<table id="listTbl" border=1>
			<thead>
				<tr>
					<th>Code</th>
					<th>Name</th>
					<th>Description</th>
				</tr>
			</thead>
			<tbody>
			</tbody>
		</table>
	</form>
</body>
</html>